<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/head.ejs") %>
  <body>
    <%- include("./partials/nav.ejs") %>

    <div class="movie-page-grid">
      <div class="movie-details">
        <h2><%= movie.title %> (<%= movie.year %>)</h2>
        <p><strong>Actors:</strong> <%= movie.actors %></p>
        <p><strong>Also known as:</strong> <%= movie.aka %></p>

        <hr />

        <button class="btn-delete" onclick="deleteMovie('<%= movie._id %>')">
          Delete
        </button>

        <button
          class="btn-favourite"
          id="favouriteBtn"
          onclick="togglefavourite('<%= movie._id %>')"
        >
          <%= movie.favourite ? "Remove from favourites" : "Add to favourites"
          %>
        </button>

        <div style="margin-top: 10px">
          <select id="collectionSelect">
            <% collections.forEach((col) => { %>
            <option value="<%= col._id %>"><%= col.name %></option>
            <% }) %>
          </select>

          <button
            class="btn-default"
            onclick="addToCollection('<%= movie._id %>')"
          >
            Add to Collection
          </button>
        </div>

        <div style="margin-top: 10px">
          <input
            type="text"
            id="newCollectionName"
            placeholder="New collection name"
          />
          <button onclick="createCollection()">Create Collection</button>
        </div>
      </div>

      <div class="movie-media">
        <% if (movie.imgPoster) { %>
        <img src="<%= movie.imgPoster %>" alt="Poster" class="movie-poster" />
        <% } %>
      </div>
    </div>

    <% if (trailerURL) { %>
    <div class="movie-trailer-wrapper">
      <video src="<%= trailerURL %>" controls class="movie-trailer"></video>
    </div>
    <% } %>

    <script src="/js/movieActions.js"></script>
  </body>
</html>
